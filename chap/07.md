# 애플리케이션 헥사곤 만들기
- 도메인 헥사곤을 토대로 시스템의 나머지 부분을 만들 수 있다.
- 시스템이 다양한 액터의 요구를 만족시키기 위해 여러 데이터와 행위를 조정하는 방법에 대해 고민한다.


## 애플리케이션 헥사곤 생성
- 애플리케이션 헥사곤은 도메인 핵사곤을 통한 내부 요청과 프레임워크 헥사곤을 통한 외부 요청을 조정한다.
- 도메인 헥사곤에서 제공한 도메인 모델을 토대로 시스템의 기능을 만든다.
- 애플리케이션 헥사곤에서는 제약조건이나 비즈니스 규칙을 정의하지 않고, 헥사고날 시스템에서 일어나는 데이터의 흐름을 정의하고 제어한다.


## 유스케이스 정의
- 도메인 헥사곤을 만들며 리소스 사이의 관계를 표련했다면, 애플리케이션 헥사곤에서는 도메인 모델 관점에서 시스템의 기능을 구현해야 한다.
  - 이런 기능은 시스템과 상호작용하는 사용자의 의도를 나타낸다.
- 큐컴버와 같은 도구는 기술에 익숙하지 않은 사람도 유스케이스를 파악할 수 있게 해준다.

### 유스케이스에 대한 디스크립션 작성
- 예) 시스템에 라우터를 추가하는 유스케이스
```text
@RouterAdd
Feature: 코어 라우터에 에지 라우터를 추가할 수 있는가?
    
    Scenario: 코어 라우터에 에지 라우터 추가
        Given: 에지 라우터가 있다
        And: 코어 라우터가 있다
        Then: 코어 라우터에 에지 라우터를 추가한다.
        
    Scenario: 또 다른 코어 라우터에 코어 라우터 추가
        Given: 에지 라우터가 있다
        And: 코어 라우터가 있다
        Then: 코어 라우터에 에지 라우터를 추가한다.
```
- 위 기능 파일은 두 개의 시나리오를 서술하고 있다.
  - 사용자가 코어 라우터에 에지 라우터를 추가
  - 사용자가 코어 라우터에 코어 라우터를 추가

```java
public interface RouterManagementUseCase {
    CoreRouter addRouterToCoreRouter(Router router, CoreRouter coreRouter);
}
```

- 시스템에서 예상되는 동작과 시나리오를 먼저 서술해 유스케이스 개발을 시작한다.
- 시나리오에 설명된 동작을 시스템이 수행할 수 있도록 하는 유스케이스 인터페이스를 정의한다.

## 유스케이스와 입력 포트 구현
- 입력 포트는 애플리케이션 헥사곤의 중심 요소이다.
  - 도메인 헥사곤과 프레임워크 헥사곤 사이의 간극을 메워주는 굉장히 중요한 역할을 한다.
- 출력포트를 통해 외부에서 데이터를 가져오고, 출력포트를 통해 해당 데이터를 도메인 헥사곤으로 전달할 수 있다.
- 데이터가 도메인 헥사곤에 있는 비즈니스 로직을 거치면, 해당 데이터가 프레임워크 헥사곤에 있는 출력 어댑터에 도달할 때까지 애플리케이션 헥사곤이 데이터를 다운 스크림으로 이동시킨다.
- 에플리케이션 헥사곤을 만들면서 출력 포트 인터페이스를 정의할 수 있는데, 아직 해당 인터페이스를 구현한 구체적인 프레임워크 헥사곤이 없기 때문에 사용할 수는 없다.


## 애플리케이션 헥사곤 테스트
- 큐컴버등에 작성된 시나리오 내용으로 단위 테스트를 조정할 수 있다.
- 이렇게 글로 작성된 시나리오는 헥사고날 시스템의 유스케이스를 이해하고 구현하기 쉬운 수단을 제공하고 애플리케이션 헥사곤에서 단위 테스트 개발을 위한 토대를 마련할 수 있다.











































