# 1-1. 왜 헥사고날 아키텍처인가?

### 모놀리식 시스템과 분산 시스템

- 헥사고날 아키텍처는 모놀리식 시스템과 분산 시스템 모두 적용 가능하다.
- 포트와 어댑터의 특성으로 인해 계속되는 기술 변화를 소프트웨어가 처리할 수 있기 때문에 분산 환경에서 유용하다.

### 의사결정

- 의사결정에 대한 논의는 소프트웨어 아키텍처 관심사와 관련있다.
- 설계에 있어 중요한 포인트
    - 시스템 변경의 필요성과 능력
    - 선행 설계에 너무 많은 리소스를 들이면 오버 엔지니어링
    - 설계에 너무 리소스를 아끼면 변경 비용이 비싸진다.
        
        **→ 설계에 사용하는 리소스는 변경을 처리하는 비용 증가 없이 변경을 수용 가능한 속도로 처리하기 위한 시스템 요구와 일치해야 한다.** 
        

### 헥사고날 아키텍처 이해

- 헥사고날 아키텍처의 메인 아이디어는 비즈니스 코드를 기술 코드로부터 분리하는 것!
- 비즈니스 목표를 달성하기 위해 기술 코드에 대한 우려 없이 목적 달성한다.
- 기술 목표를 달성하기 위해 비즈니스 코드에 대한 우려 없이 목적 달성한다.
    
    **→ 이 목표를 이루기 위해 비즈니스 코드는 어디에 있어야 하는지, 기술 문제로부터 격리시키는 위치를 결정해야 한다. → `도메인 헥사곤`**
    

### 도메인 헥사곤 구성

소프트웨어의 핵심 문제를 설명하는 요소들을 결합한다. 활용되는 메인 요소는 다음과 같다.

- **엔티티**
    - 비즈니스 데이터와 규칙 관련 엔티티
    - 실제 문제에 대한 모델이기 때문에 중요하다.
    - 객체를 특징짓는 것은 연속성과 정체성에 대한 감각
    - 연속성은 객체의 수명주기 및 변경 가능한 특성과 관련
- **값 객체**
    - 고유 식별이 필요없는 객체의 속성에 관심을 둔다.
    - 값 객체는 변경할 수 없게 해야 한다.

### 애플리케이션 헥사곤

- 도메인 헥사곤에서 나오는 비즈니스 규칙을 사용, 처리, 조정하는 일 담당
- 비즈니스 측면과 기술 측면 사이에 있다.
- 상호작용하는 중개자 역할
- **입력 포트, 출력 포트**와 **유스케이스**를 활용
- 애플리케이션 특화 작업을 추상적으로 처리한다.
    - 도메인 비즈니스 규칙에 기반한 소프트웨어 사용자의 의도와 기능을 표현한다.
- **유스케이스**
    - 도메인 제약사항을 지원
    - 엔티티 및 다른 유스케이스와 직접 상호작용
    - 소프트웨어가 하는 일을 설명하는 인터페이스로 볼 수 있다.
- **입력 포트**
    - 유스케이스 인터페이스를 구현해야 한다.
    - 도메인 제약사항을 활용할 수 있다.
- **출력 포트**
    - 외부 리소스에서 데이터를 가져와야 하는 상황에 활용
    - 기술에 구애받지 않고 설명하는 인터페이스롤 표현
    - 데이터가 어디서 오는지 신경쓰지 않는다. 책임을 출력 어댑터에 할당한다.
    

### 프레임워크 헥사곤

- 애플리케이션 기능 노출 방법을 결정하는 곳
- 외부 시스템과의 동작, 메커니즘 정의를 위한 영역
- **어댑터**를 통해 기술 결정을 구체화
- Driver 관점
    - **입력 어댑터**
    - 소프트웨어에 동작 요청
- Driven 관점
    - **출력 어댑터**
    - 애플리케이션에서 트리거 된다.
    - 일반적으로 드리븐 오퍼레이션은 일부 드라이빙 오퍼레이션의 응답을 통해 발생한다.
    

### 헥사고날 접근 방식의 장점

- 변경 허용
    - 포트와 어댑터 득성이 마찰이 적고 기술 변화를 흡수하기에 좋은 환경이다.
- 유지보수성
    - 관심사의 분리를 통해 요구사항을 반영할 수 있는 범위가 분명해서 유지보수에 용이
- 테스트 용이성
    - 외부 의존성 없이도 테스트할 수 있게 하는 것이 궁극적 목표이다.